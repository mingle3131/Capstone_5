{% extends 'sidebar_layout.html' %}
{% load static %}

{% block extra_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'css/auto_bid.css' %}">
{% endblock %}

{% block sidebar_menu %}
  <li><a href="{% url 'bidform' %}">입찰표 작성</a></li>
  <li><a href="#">보증금반환현황조회</a></li>
  <li><a href="#">즐겨찾기목록</a></li>
  <li class="active"><a href="#">자동입찰설정</a></li>
  <li><a href="{% url 'mypage' %}">마이페이지</a></li>
{% endblock %}

{% block sidebar_content %}
<h2>자동입찰설정</h2>
<br>
<hr style="width: 1000px;">
<div class="container">

  <div class="search">
    <h2 class="section-title">사건 검색 또는 즐겨찾기</h2>
    <div class="input-group">
      <input type="text" id="caseNumber" placeholder="사건번호 입력">
      <button onclick="searchCase()">검색</button>
      <button onclick="showFavorites()">즐겨찾기 보기</button>
    </div>
  </div>

  <div class="section hidden" id="reservationForm">
    <h2 class="section-title">자동입찰 예약 설정</h2>
    <div class="input-group">
      <input type="text" id="bidAmount" placeholder="입찰 금액 입력">
    </div>
    <div class="input-group">
      <select id="bidTime">
        <option>09:00</option>
        <option>10:00</option>
        <option>11:00</option>
        <option>12:00</option>
        <option>13:00</option>
        <option>14:00</option>
      </select>
    </div>
    <div class="input-group">
      <label><input type="checkbox" id="activateAutoBid"> 자동입찰 예약 활성화</label>
    </div>
    <button onclick="confirmReservation()">예약 저장</button>
  </div>

  <div class="section hidden" id="confirmationBox">
    <h2>예약 정보 확인</h2>
    <div class="confirm-box">
      <p id="confirmBidAmount"></p>
      <p id="confirmBidTime"></p>
      <p id="confirmAutoBid"></p>
    </div>
    <button onclick="completeReservation()">확인</button>
  </div>
</div>

<script>
  function searchCase() {
    document.getElementById('reservationForm').classList.remove('hidden');
  }

  function showFavorites() {
    document.getElementById('reservationForm').classList.remove('hidden');
  }

  function confirmReservation() {
    const amount = document.getElementById('bidAmount').value;
    const time = document.getElementById('bidTime').value;
    const active = document.getElementById('activateAutoBid').checked ? '예' : '아니오';

    document.getElementById('confirmBidAmount').innerText = '입찰 금액: ' + amount + ' 원';
    document.getElementById('confirmBidTime').innerText = '입찰 시간: ' + time;
    document.getElementById('confirmAutoBid').innerText = '자동입찰 활성화: ' + active;

    document.getElementById('confirmationBox').classList.remove('hidden');
  }

  function completeReservation() {
    alert('자동입찰 예약이 완료되었습니다.');
    window.location.href = '/my-reservations';
  }
</script>
{% endblock %}
